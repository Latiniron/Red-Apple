<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:title" content="">
<meta property="og:description" content="">
<meta property="og:type" content="article">
<meta property="og:image" url="http://latiniron.github.io/Red-Apple/share.png"/>
    <title>Apfel-Fänger-Spiel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #e2e8f0;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            min-height: 100vh;
            padding: 20px;
        }
        .game-container {
            background-color: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            max-width: 90%;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        canvas {
            border: 2px solid #cbd5e1;
            background-color: #f0f9ff;
            border-radius: 8px;
            touch-action: none; /* Verhindert das Standardverhalten von Touch-Gesten */
            box-shadow: inset 0 0 10px rgba(0,0,0,0.05);
        }
        .game-info {
            display: flex;
            justify-content: space-between;
            width: 100%;
            font-size: 1.25rem;
            font-weight: 600;
            color: #1f2937;
        }
        .button {
            padding: 12px 24px;
            background-color: #34d399;
            color: white;
            border-radius: 9999px;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: none;
        }
        .button:hover {
            background-color: #10b981;
            transform: translateY(-2px);
        }
        .message-box {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(255, 255, 255, 0.9);
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            text-align: center;
            border: 2px solid #ef4444;
            display: none;
            z-index: 10;
        }
        .message-box h2 {
            font-size: 1.5rem;
            font-weight: 700;
            color: #ef4444;
            margin-bottom: 12px;
        }
    </style>
</head>
<body>

<div class="game-container">
    <h1 class="text-3xl font-extrabold text-gray-900 text-center">Apfel-Fänger</h1>
    <div class="game-info">
        <span>Punkte: <span id="score">0</span></span>
    </div>
    <canvas id="gameCanvas"></canvas>
    <button id="restartButton" class="button">Spiel neu starten</button>
</div>

<div id="messageBox" class="message-box">
    <h2 id="messageText"></h2>
    <p class="text-gray-600">Klicke "Spiel neu starten", um es noch einmal zu versuchen!</p>
</div>

<script>
    window.onload = function() {
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreEl = document.getElementById('score');
        const restartButton = document.getElementById('restartButton');
        const messageBox = document.getElementById('messageBox');
        const messageText = document.getElementById('messageText');

        let score = 0;
        let isGameOver = false;
        let basket;
        let apples = [];
        let appleCount = 0;
        let appleInterval;

        // Anpassung der Canvas-Größe an das Fenster
        function resizeCanvas() {
            canvas.width = Math.min(window.innerWidth * 0.8, 600);
            canvas.height = Math.min(window.innerHeight * 0.7, 500);
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        class Basket {
            constructor() {
                this.width = 80;
                this.height = 20;
                this.x = (canvas.width - this.width) / 2;
                this.y = canvas.height - 40;
                this.color = '#4b5563'; // Dunkelgrau
            }
            draw() {
                // Zeichne das Körbchen als SVG oder Text
                ctx.font = '30px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('🧺', this.x + this.width / 2, this.y);
            }
        }

        class Apple {
            constructor() {
                this.size = 20;
                this.x = Math.random() * (canvas.width - this.size);
                this.y = 0;
                this.speed = 1.5 + Math.random() * 2;
            }
            draw() {
                // Zeichne den Apfel als Emoji
                ctx.font = '30px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('🍎', this.x + this.size / 2, this.y);
            }
            update() {
                this.y += this.speed;
            }
        }

        function init() {
            score = 0;
            scoreEl.textContent = score;
            isGameOver = false;
            apples = [];
            appleCount = 0;
            basket = new Basket();
            messageBox.style.display = 'none';

            // Alle 1,5 Sekunden einen neuen Apfel erstellen
            clearInterval(appleInterval);
            appleInterval = setInterval(() => {
                if (!isGameOver) {
                    apples.push(new Apple());
                }
            }, 1500);
        }

        function update() {
            if (isGameOver) return;

            // Äpfel aktualisieren
            for (let i = 0; i < apples.length; i++) {
                apples[i].update();

                // Kollisionserkennung
                if (apples[i].y + apples[i].size >= basket.y &&
                    apples[i].x >= basket.x &&
                    apples[i].x <= basket.x + basket.width) {
                    score++;
                    scoreEl.textContent = score;
                    apples.splice(i, 1); // Apfel entfernen
                    i--;
                }

                // Spiel vorbei, wenn ein Apfel den Boden berührt
                if (apples[i] && apples[i].y > canvas.height) {
                    isGameOver = true;
                    showGameOver();
                }
            }
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            basket.draw();
            apples.forEach(apple => apple.draw());
        }

        function gameLoop() {
            update();
            draw();
            if (!isGameOver) {
                requestAnimationFrame(gameLoop);
            }
        }

        function showGameOver() {
            messageText.textContent = `Spiel vorbei! Dein Punktestand: ${score}`;
            messageBox.style.display = 'block';
            clearInterval(appleInterval);
        }

        // Steuerung mit Maus und Touch
        function handleInput(e) {
            if (isGameOver) return;
            let clientX;
            if (e.touches) {
                clientX = e.touches[0].clientX;
            } else {
                clientX = e.clientX;
            }
            const rect = canvas.getBoundingClientRect();
            basket.x = clientX - rect.left - basket.width / 2;
            if (basket.x < 0) {
                basket.x = 0;
            }
            if (basket.x + basket.width > canvas.width) {
                basket.x = canvas.width - basket.width;
            }
        }

        canvas.addEventListener('mousemove', handleInput);
        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            handleInput(e);
        }, { passive: false });

        restartButton.addEventListener('click', () => {
            init();
            gameLoop();
        });

        // Spielstart
        init();
        gameLoop();
    };
</script>

</body>
</html>
